<!DOCTYPE html>
<html>
<head>
    <title>Debug Passkey Function</title>
</head>
<body>
    <button onclick="testFunction()">Test WebAuthn Function</button>
    <div id="result"></div>

    <script>
    async function testFunction() {
        const resultDiv = document.getElementById('result');
        
        try {
            const response = await fetch('https://yoxsewbpoqxscsutqlcb.supabase.co/functions/v1/webauthn-authentication-options', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlveHNld2Jwb3F4c2NzdXRxbGNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0MzU4NDgsImV4cCI6MjA2ODAxMTg0OH0.CrW53mnoXiatBWePensSroh0yfmVALpcWxX2dXYde5k',
                    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlveHNld2Jwb3F4c2NzdXRxbGNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0MzU4NDgsImV4cCI6MjA2ODAxMTg0OH0.CrW53mnoXiatBWePensSroh0yfmVALpcWxX2dXYde5k'
                },
                body: JSON.stringify({
                    email: 'mgthompo@gmail.com'
                })
            });

            console.log('Response status:', response.status);
            console.log('Response headers:', [...response.headers.entries()]);
            
            const data = await response.text();
            console.log('Response body:', data);
            
            resultDiv.innerHTML = `
                <h3>Status: ${response.status}</h3>
                <h3>Response:</h3>
                <pre>${data}</pre>
            `;
        } catch (error) {
            console.error('Error:', error);
            resultDiv.innerHTML = `<h3>Error: ${error.message}</h3>`;
        }
    }
    </script>
</body>
</html>